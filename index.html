<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover"
  />
  <title>Watch AI</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app">
    <!-- 顶部控制栏：N / L / S 居中 -->
    <div id="history-controls" role="toolbar" aria-label="History Controls">
      <button id="new-chat-btn" class="pill-btn" title="New Chat" aria-label="New Chat">N</button>
      <button id="load-chat-btn" class="pill-btn" title="Load Conversation" aria-haspopup="dialog" aria-controls="list-modal">L</button>
      <div class="save-toggle">
        <input type="checkbox" id="auto-save-toggle" checked aria-label="Auto Save" />
        <label for="auto-save-toggle" class="pill-btn" title="Auto-Save">S</label>
      </div>
    </div>

    <div id="chat-window" aria-live="polite"></div>

    <!-- 底部输入触发按钮：圆角长方形，仅在滚动到底部显示 -->
    <button id="compose-btn" title="输入" aria-label="输入">Type</button>
  </div>

  <!-- 全屏输入面板 -->
  <div id="input-modal" class="hidden" role="dialog" aria-modal="true" aria-label="输入">
    <div class="modal-backdrop"></div>
    <div class="modal-content panel input-panel">
      <div class="panel-header">
        <button id="modal-cancel-btn" class="ghost-btn hdr">返回</button>
        <div class="panel-title">输入</div>
        <button id="modal-send-btn" class="primary-btn hdr">发送</button>
      </div>
      <div class="panel-body">
        <textarea id="modal-textarea" placeholder="输入..." autocomplete="off" autocapitalize="none" rows="6"></textarea>
      </div>
    </div>
  </div>

  <!-- 全屏历史列表面板（含删除） -->
  <div id="list-modal" class="hidden" role="dialog" aria-modal="true" aria-label="历史对话">
    <div class="modal-backdrop"></div>
    <div class="modal-content panel list-panel">
      <div class="panel-header">
        <button id="list-close-btn" class="ghost-btn hdr">返回</button>
        <div class="panel-title">历史对话</div>
        <div class="panel-spacer"></div>
      </div>
      <div id="conversation-list" class="panel-body list-body">
        <!-- JS 渲染 -->
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/cos-js-sdk-v5/dist/cos-js-sdk-v5.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
