/* 基础与主题 */
* { box-sizing: border-box; }
html, body { height: 100%; }
html { -webkit-text-size-adjust: 100%; }
body {
  margin: 0; background: #000; color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  font-size: clamp(14px, 2.8vh, 16px); line-height: 1.4;
  -webkit-tap-highlight-color: transparent;
}
:focus, :focus-visible { outline: none; }

:root{
  --bg:#000; --surface:#1c1c1e; --text:#fff; --text-2:#8e8e93; --accent:#0a84ff;
  --gemini:#2c2c2e; --system:#5c2b2b; --pad:10px; --radius:18px; --t:.25s;
}

/* 主容器 */
#app{ display:flex; flex-direction:column; height:100vh; width:100vw; padding:var(--pad); overflow:hidden; }

/* 顶部三键居中，无边框 */
#history-controls{
  display:flex; justify-content:center; align-items:center; gap:8px; padding-bottom:6px; flex-shrink:0;
  transition: transform var(--t) ease-in-out, opacity var(--t);
}
#history-controls.hidden{ transform:translateY(-140%); opacity:0; }

/* 圆形按钮（含 S 的 label 保证真圆） */
.pill-btn{
  display:inline-flex; align-items:center; justify-content:center;
  width:36px; height:36px; border-radius:999px; border:0;
  background:var(--surface); color:#fff; font-weight:600; cursor:pointer;
}
.save-toggle{ position:relative; }
#auto-save-toggle{ position:absolute; width:0; height:0; opacity:0; pointer-events:none; }
#auto-save-toggle + label.pill-btn{ color:var(--text-2); }
#auto-save-toggle:checked + label.pill-btn{ background:var(--accent); color:#fff; }

/* 聊天窗口 */
#chat-window{
  flex:1 1 auto; overflow-y:auto; padding:8px 4px;
  display:flex; flex-direction:column; gap:8px; overscroll-behavior:contain;
}
#chat-window::-webkit-scrollbar{ width:2px; }
#chat-window::-webkit-scrollbar-thumb{ background:rgba(255,255,255,.25); border-radius:2px; }
.message{
  max-width:92%; padding:8px 12px; border-radius:var(--radius); word-wrap:break-word;
  animation:fadeIn .25s forwards; opacity:0; transform:translateY(2px) scale(.98);
}
@keyframes fadeIn{ to{ opacity:1; transform:translateY(0) scale(1);} }
.user{ background:var(--accent); color:#fff; align-self:flex-end; border-bottom-right-radius:6px; }
.gemini{ background:var(--gemini); align-self:flex-start; border-bottom-left-radius:6px; }
.system{ background:var(--system); align-self:stretch; }
.message p{ margin:.3em 0; }
.message code{ background:rgba(255,255,255,.08); padding:0 4px; border-radius:6px; }

/* 底部 Type 链接按钮：始终可见，手表更省心 */
.compose-link{
  position:fixed; left:50%; transform:translateX(-50%);
  bottom:calc(env(safe-area-inset-bottom,0) + 10px);
  padding:8px 14px; border:0; border-radius:14px; text-decoration:none;
  background:var(--accent); color:#fff; font-size:15px; line-height:1; box-shadow:0 4px 12px rgba(0,0,0,.35);
}

/* 通用页（input/history） */
.page{ display:flex; flex-direction:column; height:100vh; width:100vw; padding:var(--pad); }
.topbar{ display:flex; align-items:center; justify-content:space-between; gap:8px; padding-bottom:6px; }
.topbar .title{ font-weight:700; }
.topbar .spacer{ width:54px; } /* 占位保持居中标题 */

.ghost-btn, .primary-btn{
  display:inline-flex; align-items:center; justify-content:center; height:36px; padding:0 12px;
  border-radius:10px; border:0; text-decoration:none; font-weight:600; color:#fff; cursor:pointer;
  background:#2a2a2a;
}
.ghost-btn.small{ height:30px; font-size:.9rem; }
.primary-btn{ background:var(--accent); }

.content{ display:flex; flex-direction:column; gap:10px; flex:1 1 auto; }
.content .row{ display:flex; gap:8px; }

#input-textarea{
  flex:1 1 auto; min-height:0; width:100%; padding:10px 12px;
  border-radius:12px; border:1px solid rgba(255,255,255,.18);
  background:#111; color:#fff; font-size:1rem; resize:none;
}

/* 历史列表 */
.list-body{ overflow:auto; display:flex; flex-direction:column; gap:8px; }
.list-row{ display:grid; grid-template-columns:1fr auto; gap:6px; }
.list-item{
  display:block; width:100%; text-align:left; padding:10px 12px;
  color:#fff; background:#111; border:1px solid rgba(255,255,255,.10); border-radius:12px; cursor:pointer;
}
.list-item.active{ border-color:var(--accent); }
.list-del{ padding:0 10px; border:1px solid rgba(255,255,255,.18); border-radius:10px; background:#1a1a1a; color:#f2bbbb; }
.list-empty{ text-align:center; color:var(--text-2); padding:16px 0; }
